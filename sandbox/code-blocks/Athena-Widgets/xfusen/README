
	XFusen -- 付箋紙 for X11	v0.3

				2001/8/22
				written by Kunihiko Hayashi

1. はじめに
~~~~~~~~~~~
このプログラムは，X11 のデスクトップ上に付箋紙を作成するものです．
XPostIt(+) とは異なり，Macintosh の Stickies に似た動作をします．

※ まだ作成段階のため動作が不安定です．注意点をよく読んで御使用下さい．


2. ファイル内容
~~~~~~~~~~~~~~~
添付されるファイルは次の通りです．

	*.c,*.h			ソースファイル
	Imakefile		imake 記述ファイル
	xfusen.man		man 用マニュアル
	XFusen.ad		リソースファイル(現バージョンではなし)
	ChangeLog		履歴ファイル
	README			このファイル


3. インストール方法
~~~~~~~~~~~~~~~~~~~
次のコマンドで実行ファイルを作成します．

	% xmkmf -a
	% make

OS によっては，ロケール設定のために XPG4 Library が必要になる場合があります．
日本語が正しく表示されない場合は，Imakefile の LOCAL_LIBRARIES に -lxpg4 を
追加してから xmkmf 以降を実行してみてください(libxpg4 が必要)．

# 次に，root 権限で次のコマンドを実行してインストールします．
#
#	# make install

※注1: 現バージョンでは app-defaults は利用しませんので，できたバイナリを
       適当な場所に置いて下さい

※注2: 現バージョンでは 環境変数 LANG に ja (または ja_JP.EUC など)を設定
       しないと Xaw の関係で正しく動作しないかもしれません．

※注3: make install.man で マニュアルをインストールしますが，現時点では
       xfusen.man が大した意味を持っていないので不要です．


4. 使用方法
~~~~~~~~~~~
最初に起動すると，付箋が1つ作成されます．作成された付箋はウィンドウマネージャ
に従って，移動，拡大縮小ができます．

付箋に文字を書き込むには，左ボタンを1回押します．書き込める状態の時は背景色が
濃くなります．kinput2 などが起動していれば，下の方に漢字入力部が表示されます．

付箋を張り付ける(書き込みモードを抜ける)には，カーソルを付箋から離します
(背景色が薄くなり，テキストのキャレット"^"が消えます)．

付箋上で右ボタンを押すと，メニューを表示します．メニューの各項目は次のような
動作をします．

	About
		XFusen のバージョンなどを表示します．
	New
		新たに付箋を作成します．
	Load
		ファイルを付箋に読み込みます．前の内容は消去されます．
	Save
		付箋の内容をファイルに書き出します．
	Close
		付箋を閉じます．文書は破棄されます．
		最後の付箋だけは破棄されず終了になります．
	Font
		フォントを指定します．右の">>"にカーソルを移動すると，
		サブメニューが表示され，8種類の大きさの中から選ぶことが
		出来ます．
	Color
		付箋の背景色を指定します．右の">>"にカーソルを移動すると，
		サブメニューが表示され，8色の中から選ぶことが出来ます．
	Iconify
		アイコン化します．
		アイコン化から復帰するには，アイコンを1回クリックします．
		※ ウィンドウマネージャのアイコン化とは異なります．
	Duplicate
		付箋を複製します．
	Quit
		XFusen を終了します．付箋の位置，大きさ，属性，文書などの
		情報は，~/.xfusen_text に保存されます．


fvwm などの Window Manager を使用している時は，タイトルバーを消すことでより
付箋として見やすくなります．次の例は fvwm95 における設定例です．
この例では，タイトルバーを消去し，仮想画面でも表示され，ウィンドウリストから
除かれます．

	Style "xfusen*" NoTitle, Sticky, WindowListSkip

Quit で終了した場合，次の起動時からは ~/.xfusen_text を読み出し，前回終了した
時点での(ほとんど)全ての状態を復元します．signal などで異常終了した場合や，
ウィンドウマネージャから終了した場合も保存されます．


5. 注意点(バグなど)
~~~~~~~~~~~~~~~~~~~

* 複数の付箋を開いたまま終了した場合，付箋の上下関係は保存されず，
  開いた順に表示されます．

* .xfusen_text は現バージョンでは排他制御されません．NFS 上で共有すると内容が
  失われる可能性があるので，注意して下さい．

* kinput2 で候補を選択すると付箋からカーソルが抜けたことになり，書き込めなく
  なることがあります．(入力前に，選択ウィンドウにカーソルが来ないようにして
  おくと，今のところ大丈夫です)

* 折り返しの最後の文字の表示が消えることがあります．

* アイコン化したまま Quit すると，正しく復元できないことがあります．

* その他バグは沢山潜んでいるかも知れません:-)

* ~/.xfusen_text のフォーマットはバージョンが上がる時に変更する可能性が
  あります．新しいバージョンを使用する時は注意して下さい．


6. 動作環境
~~~~~~~~~~~
現バージョンは以下の環境で動作を確認しました．これ以外に動作が確認できた
方は御連絡下さい．

	NetBSD 1.5 + XFree86 3.3.6


7. 著作権など
~~~~~~~~~~~~~
著作権は放棄しませんが，転載については制限しません．


A. 参考文献
~~~~~~~~~~~
X11R6.3 Xtoolkit Document, X/Open Group
X11R6.3 Athena Widget Document, X/Open Group
Xlib と Xツールキット,日刊工業新聞社
Xウィンドウプログラミング(Xツールキット), JBL出版局

---
Kunihiko Hayashi
: hayashi@dec.sakura.ne.jp
: http://dec.sakura.ne.jp/~hayashi/

